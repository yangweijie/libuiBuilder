<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libuiBuilder 可视化设计器</title>
    <link rel="stylesheet" href="libui-ng-complete.css">
    <link rel="stylesheet" href="designer.css">
</head>
<body class="windows">
    <!-- 顶部工具栏 -->
    <header class="designer-header">
        <div class="header-left">
            <h1 class="app-title">libuiBuilder 设计器</h1>
            <div class="platform-selector">
                <button class="platform-btn active" data-platform="windows">Windows</button>
                <button class="platform-btn" data-platform="macos">macOS</button>
                <button class="platform-btn" data-platform="linux">Linux</button>
            </div>
        </div>
        <div class="header-right">
            <button class="btn btn-primary" id="saveBtn">保存</button>
            <button class="btn btn-secondary" id="exportBtn">导出 HTML</button>
            <button class="btn btn-secondary" id="previewBtn">预览</button>
        </div>
    </header>

    <main class="designer-main">
        <!-- 左侧组件面板 -->
        <aside class="components-panel">
            <div class="panel-header">
                <h3>组件库</h3>
            </div>
            <div class="panel-content">
                <!-- 容器组件 -->
                <div class="component-category">
                    <h4>容器组件</h4>
                    <div class="component-list">
                        <div class="component-item" draggable="true" data-component="window">
                            <div class="component-preview window-preview">
                                <span>窗口</span>
                            </div>
                            <span class="component-name">Window</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="grid">
                            <div class="component-preview grid-preview">
                                <span>网格</span>
                            </div>
                            <span class="component-name">Grid</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="hbox">
                            <div class="component-preview hbox-preview">
                                <span>水平盒子</span>
                            </div>
                            <span class="component-name">HBox</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="vbox">
                            <div class="component-preview vbox-preview">
                                <span>垂直盒子</span>
                            </div>
                            <span class="component-name">VBox</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="tab">
                            <div class="component-preview tab-preview">
                                <span>标签页</span>
                            </div>
                            <span class="component-name">Tab</span>
                        </div>
                    </div>
                </div>

                <!-- 输入控件 -->
                <div class="component-category">
                    <h4>输入控件</h4>
                    <div class="component-list">
                        <div class="component-item" draggable="true" data-component="input">
                            <div class="component-preview input-preview">
                                <input type="text" placeholder="输入框" readonly>
                            </div>
                            <span class="component-name">Input</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="textarea">
                            <div class="component-preview textarea-preview">
                                <textarea placeholder="多行输入" readonly></textarea>
                            </div>
                            <span class="component-name">Textarea</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="password">
                            <div class="component-preview password-preview">
                                <input type="password" placeholder="密码" readonly>
                            </div>
                            <span class="component-name">Password</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="combobox">
                            <div class="component-preview combobox-preview">
                                <select>
                                    <option>下拉框</option>
                                </select>
                            </div>
                            <span class="component-name">Combobox</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="spinbox">
                            <div class="component-preview spinbox-preview">
                                <div class="ui-spinbox">
                                    <input type="number" value="0" readonly>
                                    <button disabled>-</button>
                                    <button disabled>+</button>
                                </div>
                            </div>
                            <span class="component-name">Spinbox</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="slider">
                            <div class="component-preview slider-preview">
                                <div class="ui-slider">
                                    <input type="range" value="50" readonly>
                                    <span>50</span>
                                </div>
                            </div>
                            <span class="component-name">Slider</span>
                        </div>
                    </div>
                </div>

                <!-- 按钮控件 -->
                <div class="component-category">
                    <h4>按钮控件</h4>
                    <div class="component-list">
                        <div class="component-item" draggable="true" data-component="button">
                            <div class="component-preview button-preview">
                                <button>按钮</button>
                            </div>
                            <span class="component-name">Button</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="checkbox">
                            <div class="component-preview checkbox-preview">
                                <label class="ui-checkbox">
                                    <input type="checkbox" disabled>
                                    <span>复选框</span>
                                </label>
                            </div>
                            <span class="component-name">Checkbox</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="radio">
                            <div class="component-preview radio-preview">
                                <div class="ui-radio-buttons">
                                    <label>
                                        <input type="radio" name="preview" disabled>
                                        <span>单选框</span>
                                    </label>
                                </div>
                            </div>
                            <span class="component-name">Radio</span>
                        </div>
                    </div>
                </div>

                <!-- 显示控件 -->
                <div class="component-category">
                    <h4>显示控件</h4>
                    <div class="component-list">
                        <div class="component-item" draggable="true" data-component="label">
                            <div class="component-preview label-preview">
                                <span>标签文本</span>
                            </div>
                            <span class="component-name">Label</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="progressbar">
                            <div class="component-preview progressbar-preview">
                                <div class="ui-progress-bar">
                                    <div class="fill" style="width: 60%;"></div>
                                </div>
                            </div>
                            <span class="component-name">ProgressBar</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="separator">
                            <div class="component-preview separator-preview">
                                <hr class="ui-separator horizontal">
                            </div>
                            <span class="component-name">Separator</span>
                        </div>
                        <div class="component-item" draggable="true" data-component="table">
                            <div class="component-preview table-preview">
                                <table class="mini-table">
                                    <tr>
                                        <th>列1</th>
                                        <th>列2</th>
                                    </tr>
                                    <tr>
                                        <td>数据1</td>
                                        <td>数据2</td>
                                    </tr>
                                </table>
                            </div>
                            <span class="component-name">Table</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 中央设计区域 -->
        <section class="design-area">
            <div class="design-canvas" id="designCanvas">
                <div class="canvas-placeholder">
                    <div class="placeholder-content">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="9" y1="3" x2="9" y2="21"></line>
                            <line x1="15" y1="3" x2="15" y2="21"></line>
                            <line x1="3" y1="9" x2="21" y2="9"></line>
                            <line x1="3" y1="15" x2="21" y2="15"></line>
                        </svg>
                        <p>拖拽组件到此处开始设计</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 右侧属性面板 -->
        <aside class="properties-panel">
            <div class="panel-header">
                <h3>属性</h3>
            </div>
            <div class="panel-content" id="propertiesContent">
                <div class="no-selection">
                    <p>选择一个组件以编辑属性</p>
                </div>
            </div>
        </aside>
    </main>

    <!-- 底部代码预览 -->
    <footer class="code-preview">
        <div class="preview-header">
            <h4>HTML 代码预览</h4>
            <div class="preview-actions">
                <button class="btn btn-small" id="copyCodeBtn">复制代码</button>
                <button class="btn btn-small" id="toggleCodeBtn">收起</button>
            </div>
        </div>
        <div class="preview-content" id="codePreview">
            <pre><code id="htmlCode"><!-- 拖拽组件后将在此处生成 HTML 代码 --></code></pre>
        </div>
    </footer>

    <!-- 模态对话框 -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>导出 HTML</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="exportFilename">文件名:</label>
                    <input type="text" id="exportFilename" value="design.ui.html" class="ui-entry">
                </div>
                <div class="form-group">
                    <label for="exportContent">HTML 内容:</label>
                    <textarea id="exportContent" rows="15" class="ui-multiline-entry"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelExport">取消</button>
                <button class="btn btn-primary" id="confirmExport">下载文件</button>
            </div>
        </div>
    </div>

    <script src="designer.js"></script>
</body>
</html>