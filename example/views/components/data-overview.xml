<!-- app/views/components/data-overview.xml -->
<vbox>
    <!-- æ•°æ®å¡ç‰‡åŒºåŸŸ -->
    <hbox>
        @foreach($metrics as $metric)
        <vbox border="true" padding="true" margin="true" stretchy="true">
            <hbox>
                <label style="icon">{{$metric['icon'] ?? 'ğŸ“Š'}}</label>
                <vbox stretchy="true">
                    <label style="small" color="gray">{{$metric['title']}}</label>
                    <label style="large" color="{{$metric['color'] ?? 'blue'}}">{{$metric['value']}}</label>
                    @if(isset($metric['change']))
                    <label style="small" color="{{$metric['change'] > 0 ? 'green' : 'red'}}">
                        {{$metric['change'] > 0 ? 'â†‘' : 'â†“'}} {{abs($metric['change'])}}%
                    </label>
                    @endif
                </vbox>
            </hbox>
        </vbox>
        @endforeach
    </hbox>

    <separator/>

    <!-- å›¾è¡¨åŒºåŸŸ -->
    <hbox stretchy="true">
        <!-- ä¸»å›¾è¡¨ -->
        <vbox stretchy="true">
            <label style="subtitle">æ•°æ®è¶‹åŠ¿</label>
            <canvas id="mainChart" width="600" height="300" ondraw="drawMainChart"/>

            <!-- å›¾è¡¨æ§åˆ¶ -->
            <hbox>
                <label>æ—¶é—´èŒƒå›´:</label>
                <combobox id="timeRange" items="ä»Šå¤©,æœ¬å‘¨,æœ¬æœˆ,æœ¬å¹´" selected="1" onchange="updateChart"/>
                <button onclick="exportChart">å¯¼å‡ºå›¾è¡¨</button>
            </hbox>
        </vbox>

        <separator orientation="vertical"/>

        <!-- ä¾§è¾¹ç»Ÿè®¡ -->
        <vbox width="250">
            <label style="subtitle">è¯¦ç»†ç»Ÿè®¡</label>

            <!-- åˆ†ç±»ç»Ÿè®¡ -->
            <vbox border="true" padding="true">
                <label style="small">æŒ‰ç±»åˆ«ç»Ÿè®¡</label>
                @foreach($categories as $category)
                <hbox>
                    <label>{{$category['name']}}</label>
                    <spacer/>
                    <label style="bold">{{$category['count']}}</label>
                </hbox>
                @endforeach
            </vbox>

            <!-- å®æ—¶æ•°æ® -->
            <vbox border="true" padding="true">
                <label style="small">å®æ—¶æ•°æ®</label>
                <label id="realTimeData">æ­£åœ¨åŠ è½½...</label>
                <button onclick="refreshRealTime">åˆ·æ–°</button>
            </vbox>
        </vbox>
    </hbox>
</vbox>